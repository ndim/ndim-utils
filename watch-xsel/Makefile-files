# -*- Makefile -*-

EXTRA_DIST  += watch-xsel/watch-xsel.in
bin_SCRIPTS += watch-xsel/watch-xsel
CLEANFILES  += watch-xsel/watch-xsel
watch-xsel/watch-xsel: watch-xsel/watch-xsel.in $(PACKAGE_SUBST_DEP)
	$(PACKAGE_SUBST) $(srcdir)/watch-xsel/watch-xsel.in watch-xsel/watch-xsel
	chmod +x watch-xsel/watch-xsel

EXTRA_DIST += watch-xsel/watch-xsel.1.in
CLEANFILES += watch-xsel/watch-xsel.1
man_MANS   += watch-xsel/watch-xsel.1
watch-xsel/watch-xsel.1: watch-xsel/watch-xsel.1.in $(PACKAGE_SUBST_DEP)
	$(PACKAGE_SUBST) $(srcdir)/watch-xsel/watch-xsel.1.in watch-xsel/watch-xsel.1

TEST_EXTENSIONS += .sh
SH_LOG_COMPILER = /bin/sh
AM_SH_LOG_FLAGS = -x

EXTRA_DIST += watch-xsel/test_watch-xsel--help.sh
TESTS      += watch-xsel/test_watch-xsel--help.sh

EXTRA_DIST += watch-xsel/test_watch-xsel--version.sh
TESTS      += watch-xsel/test_watch-xsel--version.sh

TEST_EXTENSIONS += .twx
TWX_LOG_COMPILER = /bin/bash
AM_TWX_LOG_FLAGS = $(srcdir)/watch-xsel/test-watch-xsel

# Make the test case execution sequential by adding dependencies
# between the test cases' log files. There is only one X11 selection,
# so we cannot run multiple tests in parallel which use the X11
# selection.

EXTRA_DIST += watch-xsel/test_watch-xsel_oneline.xsel
EXTRA_DIST += watch-xsel/test_watch-xsel_oneline.twx
TESTS      += watch-xsel/test_watch-xsel_oneline.twx

#EXTRA_DIST += watch-xsel/test-watch-xsel-4.xsel
#EXTRA_DIST += watch-xsel/test-watch-xsel-4.twx
#TESTS      += watch-xsel/test-watch-xsel-4.twx
#watch-xsel/test-watch-xsel-4.log: watch-xsel/test-watch-xsel-3.log
